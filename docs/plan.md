## Unsplash 카테고리 월드컵 구현 계획

### 1. 목표 및 범위 재확인
- PRD 요구사항을 준수하여 로컬 정적 웹앱(HTML/CSS/JS)으로 구현한다.
- Unsplash Source를 이용해 카테고리별 32장의 이미지를 확보하고 1:1 토너먼트를 진행한다.
- 픽셀 아트 감성의 UI 스타일(저해상도 텍스처, 굵은 윤곽선, 비트맵 폰트)을 일관되게 적용한다.
- 진행 상태와 히스토리는 `localStorage`에 저장하여 재방문 시 복구 가능하게 한다.

### 2. 기술 스택 및 개발 환경
- 정적 빌드: Vite + Vanilla JS 또는 React 선택 (초기 제안: Vite + React, TypeScript 선택 고려).
- 스타일링: CSS Modules 또는 Tailwind; 픽셀 아트 표현을 위해 CSS 커스텀 속성(예: `image-rendering: pixelated`) 적극 활용.
- 상태 관리: React 선택 시 Context + Reducer 기반으로 경기 상태/세션 상태 관리, Vanilla JS 선택 시 상태 머신 모듈 작성.
- 이미지 프리로드: Fetch API + `Image` 객체 프리로드 또는 `Promise.allSettled` 사용.

### 3. 시스템 아키텍처 개요
- **Presentation Layer**: 화면 컴포넌트(홈, 로딩, 경기, 결과)와 픽셀 UI 컴포넌트(버튼, 카드, 진행바).
- **Domain Logic**: 토너먼트 상태 머신(라운드 계산, 매치업 생성, 선택 처리, 타이머 관리).
- **Data Layer**: Unsplash Source 모듈(카테고리 키워드 매핑, 중복 제거), localStorage 래퍼(설정, 세션, 히스토리 저장/복원).

### 4. 화면별 구현 계획
- **홈 화면**
  - 카테고리 선택 그리드(픽셀 버튼), 최근 플레이 기록 카드.
  - `localStorage`에서 마지막 카테고리 및 히스토리 로드.
  - 시작 버튼 클릭 시 로딩 화면으로 전환.
- **로딩 화면**
  - 진행 퍼센트 표시(픽셀 스타일 게이지), 프리로드 큐 진행률 업데이트.
  - 실패 시 재시도 버튼 및 실패 로그 표시.
- **경기 화면**
  - 4:5 비율 카드 2개, 각각 픽셀 프레임과 음영 적용.
  - 키보드 ←/→, 클릭 이벤트 처리, 라운드·진행도 표시(픽셀 배지).
  - 10초 타이머를 픽셀 게이지로 시각화, 시간 초과 시 자동 선택.
- **결과 화면**
  - 우승 이미지와 간략 순위(Top N) 노출, 픽셀 트로피 아이콘.
  - `localStorage` 히스토리 업데이트, 다시 하기/다른 카테고리 CTA 제공.

### 5. 핵심 모듈 작업 항목
- **이미지 수집 모듈**
  - 카테고리별 키워드 목록 관리, Unsplash Source URL 생성(`sig` 파라미터 포함).
  - 중복 URL 제거 로직 및 최소 32장 확보 실패 시 재시도 처리.
  - 썸네일/풀사이즈 URL 구성 및 메타 데이터 준비.
- **토너먼트 상태 머신**
  - 초기 32장 섞기 → 페어링 → 라운드 별 survivors 계산.
  - 선택 이벤트 처리, 타이머 관리, 자동 선택 로직.
  - 진행 상태와 다음 매치 업데이트 인터페이스 정의.
- **로컬 저장소 래퍼**
  - `uc:settings`, `uc:lastSession`, `uc:history` CRUD 함수 설계.
  - JSON 직렬화/역직렬화, 버전 마이그레이션 대비 기본 구조 포함.
- **UI 컴포넌트 라이브러리**
  - 픽셀 버튼, 픽셀 카드, 픽셀 프로그레스바, 픽셀 모달 등 공통 컴포넌트.
  - 테마 토큰: 색상 팔레트(레트로 8~10색), 그림자/하이라이트 규칙, 픽셀 두께 기준.

### 6. 픽셀 아트 스타일 가이드
- `image-rendering: pixelated`, `background-size: contain` 등을 활용해 저해상도 느낌 유지.
- 2~3px 굵기의 테두리, 45° 하이라이트 라인, 블록형 그림자를 기본으로 적용.
- 웹 안전 비트맵 폰트 또는 커스텀 픽셀 폰트(@font-face) 적용, 큰 제목/버튼에 사용.
- 애니메이션은 빠른 스텝 전환(예: translateX 100% → 0%)과 ease-out을 사용, 모션 블러 대신 프레임 전환 느낌 강조.

### 7. 성능 및 안정성 계획
- 이미지 로딩은 8장 단위로 배치 프리로드, 다음 라운드 진입 전 추가 로딩.
- `Promise.allSettled` 활용해 실패한 요청만 재시도, 최대 3회 제한.
- 타이머, 자동 선택 로직에 `requestAnimationFrame` 또는 `setInterval` 기반 핸들링(우선 `setInterval`).
- 오류 발생 시 사용자에게 픽셀 스타일 토스트/알림 제공.

### 8. 테스트 전략
- 유닛 테스트: 토너먼트 상태 머신, 로컬 저장소 래퍼, 이미지 중복 제거 함수.
- 통합 테스트: 카테고리 선택 → 경기 흐름 → 결과 저장 시나리오.
- 수동 테스트: 데스크톱/모바일 브라우저에서 픽셀 스타일 표현, 타이머 자동 선택, 재로딩 복구.

### 9. 마일스톤 제안(주요 작업 순서)
1. D0: 환경 세팅(Vite 템플릿, 픽셀 폰트 세팅), 디자인 토큰/테마 정의.
2. D1: 화면 라우팅/상태 전환 골격, 로컬 저장소 래퍼 구현.
3. D2: Unsplash Source 연동 및 이미지 프리로드, 토너먼트 상태 머신 구현.
4. D3: 픽셀 UI 컴포넌트 마감, 애니메이션/타이머 완성, 결과/히스토리 화면 정리.
5. D4: 종합 QA, 성능 점검, README 및 배포 가이드 업데이트.

### 10. 후속 고려사항
- 접근성: 키보드 포커스 스타일과 대체 텍스트 규칙 정의 필요.
- 카테고리 확장: 밈 이미지 확보율에 따라 보조 키워드 리스트 보완.
- 향후 확장: Unsplash 공식 API 전환 시 Access Key 관리 전략 마련.

